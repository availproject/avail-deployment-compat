namespace: /polygon

# Bootnodes 
# =========================================

da-validator-1:
  defines: runnable
  inherits: ./da-validator
  variables:
    self_id: "da-validator-1"
    node_key: <- act("/polygon/da-vault/get_as_json", "path", "secret/da/testnet/da-validator-1") parse-json get-member("keynode") get-member("sk")
    name: MATIC_VALIDATOR_1
    volume-data: /mnt/volume/da/1/
    cmds: <- "--reserved-nodes /dns4/" get-hostname("/polygon/da-validator-2", "da-node") "/tcp/30333/p2p/12D3KooWQtxig5HukFDwQzshGWgQEZAqGqdCN7AQBW7cQRJWCyxL --reserved-nodes /dns4/" get-hostname("/polygon/da-validator-3", "da-node") "/tcp/30333/p2p/12D3KooW9tVuCzq3eknsevL5uyqQ3LpVcuqtkTqropjNccbhsWBz -lruntime::system=trace " concat-all
  affinity:
    defines: affinity
    name: da-val-1
  volumes:
    defines: volumes
    da_state_1:
      size: 64
      kind: SSD
      path: /mnt/volume/da/

da-validator-2:
  defines: runnable
  inherits: ./da-validator
  variables:
    self_id: "da-validator-2"
    node_key: <- act("/polygon/da-vault/get_as_json", "path", "secret/da/testnet/da-validator-2") parse-json get-member("keynode") get-member("sk")
    name: MATIC_VALIDATOR_2
    volume-data: /mnt/volume/da/2
    cmds: <- "--bootnodes /dns4/" get-hostname("/polygon/da-validator-1", "da-node") "/tcp/30333/p2p/12D3KooWK1NcYjwpyRUYVG9tjp7X2iGbrQxNVafC5hJU9mggYTgv  --reserved-nodes /dns4/" get-hostname("/polygon/da-validator-3", "da-node")  "/tcp/30333/p2p/12D3KooW9tVuCzq3eknsevL5uyqQ3LpVcuqtkTqropjNccbhsWBz -lruntime::system=trace " concat-all 
  affinity:
    defines: affinity
    name: da-val-2
  volumes:
    defines: volumes
    da_state_2:
      size: 64
      kind: SSD
      path: <- $volume-data


da-validator-3:
  defines: runnable
  inherits: ./da-validator
  variables:
    self_id: "da-validator-3"
    node_key: <- act("/polygon/da-vault/get_as_json", "path", "secret/da/testnet/da-validator-3") parse-json get-member("keynode") get-member("sk")
    name: MATIC_VALIDATOR_3
    volume-data: /mnt/volume/da/3
    cmds: <- "--bootnodes /dns4/" get-hostname("/polygon/da-validator-1", "da-node") "/tcp/30333/p2p/12D3KooWK1NcYjwpyRUYVG9tjp7X2iGbrQxNVafC5hJU9mggYTgv --reserved-nodes /dns4/" get-hostname("/polygon/da-validator-2", "da-node") "/tcp/30333/p2p/12D3KooWQtxig5HukFDwQzshGWgQEZAqGqdCN7AQBW7cQRJWCyxL -lruntime::election-provider=trace -lruntime::system=trace " concat-all 
  affinity:
    defines: affinity
    name: da-val-3
  volumes:
    defines: volumes
    da_state_3:
      size: 64
      kind: SSD
      path: <- $volume-data

# External validators
# =======================================

da-validator-4:
  defines: runnable
  inherits: ./da-validator
  variables:
    self_id: "da-validator-4"
    node_key: <- act("/polygon/da-vault/get_as_json", "path", "secret/da/testnet/da-validator-4") parse-json get-member("keynode") get-member("sk")
    name: MATIC_VALIDATOR_4
    volume-data: /mnt/volume/da/4
    cmds: <- "--bootnodes /dns4/" get-hostname("/polygon/da-validator-1", "da-node") "/tcp/30333/p2p/12D3KooWK1NcYjwpyRUYVG9tjp7X2iGbrQxNVafC5hJU9mggYTgv --bootnodes /dns4/" get-hostname("/polygon/da-validator-2", "da-node") "/tcp/30333/p2p/12D3KooWQtxig5HukFDwQzshGWgQEZAqGqdCN7AQBW7cQRJWCyxL --bootnodes /dns4/" get-hostname("/polygon/da-validator-3", "da-node")  "/tcp/30333/p2p/12D3KooW9tVuCzq3eknsevL5uyqQ3LpVcuqtkTqropjNccbhsWBz " concat-all 
  affinity:
    defines: affinity
    tag: validator

da-validator-5:
  defines: runnable
  inherits: ./da-validator
  variables:
    self_id: "da-validator-5"
    node_key: <- act("/polygon/da-vault/get_as_json", "path", "secret/da/testnet/da-validator-5") parse-json get-member("keynode") get-member("sk")
    name: MATIC_VALIDATOR_5
    volume-data: /mnt/volume/da/5
    cmds: <- "--bootnodes /dns4/" get-hostname("/polygon/da-validator-1", "da-node") "/tcp/30333/p2p/12D3KooWK1NcYjwpyRUYVG9tjp7X2iGbrQxNVafC5hJU9mggYTgv --bootnodes /dns4/" get-hostname("/polygon/da-validator-2", "da-node") "/tcp/30333/p2p/12D3KooWQtxig5HukFDwQzshGWgQEZAqGqdCN7AQBW7cQRJWCyxL --bootnodes /dns4/" get-hostname("/polygon/da-validator-3", "da-node")  "/tcp/30333/p2p/12D3KooW9tVuCzq3eknsevL5uyqQ3LpVcuqtkTqropjNccbhsWBz " concat-all 
  affinity:
    defines: affinity
    tag: validator

da-validator-6:
  defines: runnable
  inherits: ./da-validator
  variables:
    self_id: "da-validator-6"
    node_key: <- act("/polygon/da-vault/get_as_json", "path", "secret/da/testnet/da-validator-6") parse-json get-member("keynode") get-member("sk")
    name: MATIC_VALIDATOR_6
    volume-data: /mnt/volume/da/6
    cmds: <- "--bootnodes /dns4/" get-hostname("/polygon/da-validator-1", "da-node") "/tcp/30333/p2p/12D3KooWK1NcYjwpyRUYVG9tjp7X2iGbrQxNVafC5hJU9mggYTgv --bootnodes /dns4/" get-hostname("/polygon/da-validator-2", "da-node") "/tcp/30333/p2p/12D3KooWQtxig5HukFDwQzshGWgQEZAqGqdCN7AQBW7cQRJWCyxL --bootnodes /dns4/" get-hostname("/polygon/da-validator-3", "da-node")  "/tcp/30333/p2p/12D3KooW9tVuCzq3eknsevL5uyqQ3LpVcuqtkTqropjNccbhsWBz " concat-all 
  affinity:
    defines: affinity
    tag: validator
